# ---------------------------
# GENERAL
# ---------------------------
# path
set $mpds_fallback $HOME/.local/run/mpd.socket
set $rofi_scripts  $HOME/.config/polybar/scripts
set $sh_scripts    $HOME/.local/sh
# .Xresources
set_from_resource $term     i3wm.TERM     urxvt
set_from_resource $mpdhost  i3wm.MPDS     $HOME/.local/run/mpd.socket
set_from_resource $c_mon    i3wm.PMON     "HDMI-1-2"
set_from_resource $l_mon    i3wm.SMON     "eDP-1-1"
set_from_resource $browser  i3wm.browser  "qutebrowser --enable-webengine-inspector"
set_from_resource $color0   i3wm.color0   #222222
set_from_resource $color8   i3wm.color8   #333333
set_from_resource $color1   i3wm.color1   #D81B60
set_from_resource $color9   i3wm.color9   #CA407E
set_from_resource $color2   i3wm.color2   #5F676A
set_from_resource $color10  i3wm.color10  #888888
set_from_resource $color7   i3wm.color7   #E8E2D8
set_from_resource $color15  i3wm.color15  #D8DEE8
# I3
set $super Mod4
set $alt Mod1
# Press super to move float
floating_modifier $super
# ---------------------------


# ---------------------------
# AUTOSTART
# ---------------------------
exec --no-startup-id $sh_scripts/xrndr.sh

exec --no-startup-id compton -bc --config ~/.config/compton/config
exec --no-startup-id /usr/lib/gnome-settings-daemon/gsd-xsettings &
exec --no-startup-id $sh_scripts/xkbr.sh

exec_always ~/.fehbg
exec_always ~/.config/polybar/launch.sh
# ---------------------------

# MANAGE MONITORS (need some sort of sh script to generate settings from a template
# jinja2 templates? Currently it should cover i3, polybar and xrandr settings)
workspace 1 output $l_mon
workspace 2 output $c_mon $l_mon
workspace 3 output $c_mon $l_mon
workspace 4 output $c_mon $l_mon
workspace 5 output $c_mon $l_mon
workspace 6 output $c_mon $l_mon
workspace 7 output $c_mon $l_mon
workspace 8 output $c_mon $l_mon
workspace 9 output $c_mon $l_mon

# idk workspace to monitor binding is buggy? It does not work right
# after startup, sometimes monitor on the left takes 3rd workspace or 1st,
# annoying, dk how to fix
exec --no-startup-id $sh_scripts/xrndr.sh
# ---------------------------


# ---------------------------
# KEYBINDINGS
# ---------------------------
# super group
bindsym $super+q kill
bindsym $alt+F4 kill
bindsym $super+Return exec $term
bindsym $super+d exec $rofi_scripts/launcher-alt
# change focus
bindsym $super+h focus left
bindsym $super+j focus down
bindsym $super+k focus up
bindsym $super+l focus right
# layout
bindsym $super+f fullscreen toggle
bindsym $super+s layout toggle split
# nav
bindsym $super+1 workspace1
bindsym $super+2 workspace 2
bindsym $super+3 workspace 3
bindsym $super+4 workspace 4
bindsym $super+5 workspace 5
bindsym $super+6 workspace 6
bindsym $super+7 workspace 7
bindsym $super+8 workspace 8
bindsym $super+9 workspace 9

# super Shift group
# nav
bindsym $super+Shift+h move left
bindsym $super+Shift+j move down
bindsym $super+Shift+k move up
bindsym $super+Shift+l move right
# move focused container to workspace
bindsym $super+Shift+1 move container to workspace 1
bindsym $super+Shift+2 move container to workspace 2
bindsym $super+Shift+3 move container to workspace 3
bindsym $super+Shift+4 move container to workspace 4
bindsym $super+Shift+5 move container to workspace 5
bindsym $super+Shift+6 move container to workspace 6
# sh
bindsym $super+Shift+a exec $rofi_scripts/audiodevice.sh
bindsym $super+Shift+w exec $rofi_scripts/wifi.sh
# apps
bindsym $super+Shift+b exec $browser
bindsym $super+Shift+t exec env XDG_CURRENT_DESKTOP=GNOME gnome-tweaks
bindsym $super+Shift+s exec env XDG_CURRENT_DESKTOP=GNOME gnome-control-center
bindsym $super+Shift+c exec code
bindsym $super+Shift+d exec i3-dmenu-desktop --dmenu="dmenu -i -fn 'Noto Sans:size=8'"
# i3 misc
bindsym $super+Shift+r restart

# super arrow group
bindsym $super+Down split v
bindsym $super+Right split h

# fn group
bindsym XF86AudioRaiseVolume exec amixer -D pulse set Master 5%+
bindsym XF86AudioLowerVolume exec amixer -D pulse set Master 5%-
bindsym XF86AudioMute exec amixer -D pulse set Master 1+ toggle
bindsym XF86AudioNext exec mpc --host $mpdhost next
bindsym XF86AudioPrev exec mpc --host $mpdhost prev
bindsym XF86AudioPlay exec mpc --host $mpdhost toggle
bindsym XF86AudioStop exec mpc --host $mpdhost stop

# single and special keys group
bindsym Print exec $sh_scripts/scr.sh
bindsym $super+Pause exec $rofi_scripts/powermenu
# ---------------------------


# ---------------------------
# MODES
# ---------------------------
# resize window (you can also use the mouse for that)
mode "resize" {
  bindsym Left resize shrink width 5 px or 5 ppt
  bindsym Down resize grow height 5 px or 5 ppt
  bindsym Up resize shrink height 5 px or 5 ppt
  bindsym Right resize grow width 5 px or 5 ppt
  bindsym Escape mode "default"
  bindsym Return mode "default"
}
bindsym $super+r mode "resize"

# GAPS MODE
bindsym $super+Shift+g mode "gaps"
mode "gaps" {
  bindsym o mode "gaps outer"
  bindsym i mode "gaps inner"
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
mode "gaps inner" {
  bindsym plus  gaps inner current plus 5
  bindsym minus gaps inner current minus 5
  bindsym 0     gaps inner current set 0
 
  bindsym Shift+plus  gaps inner all plus 5
  bindsym Shift+minus gaps inner all minus 5
  bindsym Shift+0     gaps inner all set 0
 
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
mode "gaps outer" {
  bindsym plus  gaps outer current plus 5
  bindsym minus gaps outer current minus 5
  bindsym 0     gaps outer current set 0
 
  bindsym Shift+plus  gaps outer all plus 5
  bindsym Shift+minus gaps outer all minus 5
  bindsym Shift+0     gaps outer all set 0
 
  bindsym Return mode "default"
  bindsym Escape mode "default"
}

# FLOATING WINDOW MOVE MODE
bindsym $super+m mode "move" focus floating
mode "move" {
    bindsym $mod+Tab focus right

    bindsym Left  move left
    bindsym Down  move down
    bindsym Up    move up
    bindsym Right move right

    bindsym h     move left
    bindsym j     move down
    bindsym k     move up
    bindsym l     move right

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
# ---------------------------


# ---------------------------
# RULES PER WINDOW
# ---------------------------
# window rules, you can find the window class using xprop
for_window [class=".*"] border pixel 2
for_window [class=Lxappearance|Eog|Gnome-disks|Gpick] floating enable
for_window [class=libreoffice*|Gimp*|Inkscape|Lxappearance|GParted|discord|TelegramDesktop|TeamSpeak*|Gnome-disks] focus
for_window [class=TelegramDesktop|Gnome-disks] resize set 540 650
for_window [class=TeamSpeak*] resize set 540 850
for_window [class=TelegramDesktop|Gnome-disks] move position center
for_window [class=TeamSpeak*] move position center
# ---------------------------


# ---------------------------
# GAPS
# ---------------------------
gaps top 0
gaps inner 5
new_window none
# ---------------------------


# ---------------------------
# COLORS
# ---------------------------
# colour of             border    backgro     text       indicat   child_b
client.focused          $color1   #000000     $color15   #000000   $color1
client.focused_inactive $color0   $color2     $color15   $color2   $color2
client.unfocused        $color8   $color0     $color10   $color0   $color8
client.urgent           $color0   $color9     $color15   $color1   $color0
client.placeholder      #000000   $color0     $color15   $color0   #000000
client.background       #000000
# ---------------------------
