# ---------------------------
# GENERAL
# ---------------------------
# path
set $rofi_scripts  $HOME/.config/rofi/bins
set $sh_scripts    $HOME/.local/sh
# .Xresources
set_from_resource $term     i3wm.TERM     urxvt
set_from_resource $mpdhost  i3wm.MPDS     $HOME/.local/run/mpd.socket
set_from_resource $c_mon    i3wm.PMON     "HDMI-1-2"
set_from_resource $l_mon    i3wm.SMON     "eDP-1-1"
set_from_resource $browser  i3wm.browser
set_from_resource $color0   i3wm.bg   #222222
set_from_resource $color8   i3wm.bg   #333333
set_from_resource $color1   i3wm.ac   #D81B60
set_from_resource $color9   i3wm.bi   #CA407E
set_from_resource $color2   i3wm.be   #5F676A
set_from_resource $color10  i3wm.bg  #888888
set_from_resource $color7   i3wm.color7   #E8E2D8
set_from_resource $color15  i3wm.color15  #D8DEE8
font Fira Sans Book:style=Book,Regular 15
# I3
set $super Mod4
set $alt Mod1
# Press super to move float
floating_modifier $super
# ---------------------------


# ---------------------------
# AUTOSTART
# ---------------------------
exec --no-startup-id compton -bc --config ~/.config/compton/config
# will execute all *sh under $sh_scripts/autostart.d/
exec --no-startup-id $sh_scripts/autostart.sh
exec_always ~/.fehbg
exec_always ~/.config/polybar/launch.sh
# ---------------------------

workspace 1 output $l_mon
workspace 2 output $c_mon
workspace 3 output $c_mon
workspace 4 output $c_mon
workspace 5 output $c_mon
workspace 6 output $c_mon
workspace 7 output $c_mon
workspace 8 output $c_mon
workspace 9 output $c_mon

exec --no-startup-id $sh_scripts/autostart.d/set-mon.sh
# ---------------------------


# ---------------------------
# KEYBINDINGS
# ---------------------------
# super group
bindsym $super+q kill
bindsym $alt+F4 kill
# change focus
bindsym $super+h focus left
bindsym $super+j focus down
bindsym $super+k focus up
bindsym $super+l focus right
# layout
bindsym $super+f fullscreen toggle
bindsym $super+s layout toggle split
bindsym $super+Down split v
bindsym $super+Up split h
# nav
bindsym $super+1 workspace1
bindsym $super+2 workspace 2
bindsym $super+3 workspace 3
bindsym $super+4 workspace 4
bindsym $super+5 workspace 5
bindsym $super+6 workspace 6
bindsym $super+7 workspace 7
bindsym $super+8 workspace 8
bindsym $super+9 workspace 9
bindsym $super+Left workspace prev
bindsym $super+Right workspace next

# super Shift group
# nav
bindsym $super+Shift+h move left
bindsym $super+Shift+j move down
bindsym $super+Shift+k move up
bindsym $super+Shift+l move right
# move focused container to workspace
bindsym $super+Shift+1 move container to workspace 1
bindsym $super+Shift+2 move container to workspace 2
bindsym $super+Shift+3 move container to workspace 3
bindsym $super+Shift+4 move container to workspace 4
bindsym $super+Shift+5 move container to workspace 5
bindsym $super+Shift+6 move container to workspace 6
bindsym $super+Shift+7 move container to workspace 7
bindsym $super+Shift+8 move container to workspace 8
bindsym $super+Shift+9 move container to workspace 9

# i3 misc
bindsym $super+Shift+r restart

# non i3
bindsym $super+Return exec urxvt

bindsym $super+d exec $rofi_scripts/appsmenu
bindsym $super+Shift+a exec $rofi_scripts/mpdmenu
bindsym $super+Shift+w exec $rofi_scripts/networkmenu
bindsym Print exec $rofi_scripts/scrotmenu
bindsym $super+Pause exec $rofi_scripts/powermenu
bindsym $super+Shift+i exec $rofi_scripts/i3layoutmenu
bindsym $super+Shift+v exec $rofi_scripts/nmvpnmenu


bindsym $super+Shift+t exec XDG_CURRENT_DESKTOP=GNOME gnome-tweaks
bindsym $super+Shift+s exec XDG_CURRENT_DESKTOP=GNOME gnome-control-center
bindsym $super+shift+c exec XDG_CURRENT_DESKTOP=GNOME gnome-calendar

bindsym XF86AudioRaiseVolume exec mpc --host $mpdhost volume +5
bindsym XF86AudioLowerVolume exec mpc --host $mpdhost volume -5
bindsym XF86AudioNext exec mpc --host $mpdhost next
bindsym XF86AudioPrev exec mpc --host $mpdhost prev
bindsym XF86AudioPlay exec mpc --host $mpdhost toggle
bindsym XF86AudioStop exec mpc --host $mpdhost stop

bindsym $alt+Tab workspace back_and_forth
# ---------------------------


# ---------------------------
# MODES
# ---------------------------
# resize window (you can also use the mouse for that)
mode "resize" {
  bindsym h resize shrink width 5 px or 5 ppt
  bindsym j resize grow height 5 px or 5 ppt
  bindsym k resize shrink height 5 px or 5 ppt
  bindsym l resize grow width 5 px or 5 ppt
  bindsym Escape mode "default"
  bindsym Return mode "default"
}
bindsym $super+r mode "resize"

# GAPS MODE
bindsym $super+Shift+g mode "gaps"
mode "gaps" {
  bindsym o mode "gaps outer"
  bindsym i mode "gaps inner"
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
mode "gaps inner" {
  bindsym plus  gaps inner current plus 5
  bindsym minus gaps inner current minus 5
  bindsym 0     gaps inner current set 0

  bindsym Shift+plus  gaps inner all plus 5
  bindsym Shift+minus gaps inner all minus 5
  bindsym Shift+0     gaps inner all set 0

  bindsym Return mode "default"
  bindsym Escape mode "default"
}
mode "gaps outer" {
  bindsym plus  gaps outer current plus 5
  bindsym minus gaps outer current minus 5
  bindsym 0     gaps outer current set 0

  bindsym Shift+plus  gaps outer all plus 5
  bindsym Shift+minus gaps outer all minus 5
  bindsym Shift+0     gaps outer all set 0

  bindsym Return mode "default"
  bindsym Escape mode "default"
}

# FLOATING WINDOW MOVE MODE
bindsym $super+m mode "move" focus floating
mode "move" {
    bindsym $mod+Tab focus right

    bindsym Left  move left
    bindsym Down  move down
    bindsym Up    move up
    bindsym Right move right

    bindsym h     move left
    bindsym j     move down
    bindsym k     move up
    bindsym l     move right

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
# ---------------------------


# ---------------------------
# RULES PER WINDOW
# ---------------------------
# window rules, you can find the window class using xprop
# options:
#   floation enable
#   focus
#   move container to workspace N
#   resize set X Y
#   border pixel N
#   move position
for_window [class=".*"] border pixel 1
for_window [class=discord|Telegram*|Pidgin|Slack] move container to workspace 9
for_window [class="jetbrains-pycharm"] move container to workspace 3
for_window [class="qutebrowser"] move container to workspace 2
for_window [class="Google-chrome"] move container to workspace 1
for_window [class="evelauncher*"] move container to workspace 1
for_window [class="evelauncher*"] floating enable
for_window [class="exefile*"] move container to workspace 4
for_window [class="Firefox"] move container to workspace 1

# ---------------------------


# ---------------------------
# GAPS
# ---------------------------
gaps inner 5
new_window none
smart_gaps on
smart_borders on
# ---------------------------


# ---------------------------
# COLORS
# ---------------------------
# colour of             border    backgro     text      indicat   child_b
client.focused          $color8   $color8     $color2   $color2   $color2
client.focused_inactive $color0   $color2     #010101   $color2   $color2
client.unfocused        $color8   $color0     #595959   $color0   $color8
client.urgent           $color0   $color9     $color15  $color1   $color0
client.placeholder      #000000   $color0     $color15  $color0   #000000
# ---------------------------
